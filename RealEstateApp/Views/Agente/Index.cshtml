@using RealEstateApp.Shared.Dtos
@model List<AgenteDto>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Nuestros Agentes";


    string nombreBuscado = ViewBag.NombreAgenteBuscado as string ?? string.Empty;



    var lista = Model != null ? new List<AgenteDto>(Model) : new List<AgenteDto>();

    // Filtro de búsqueda (por nombre)
    if (!string.IsNullOrWhiteSpace(nombreBuscado))
    {
        lista = lista
            .Where(a => (a.NombreCompleto ?? string.Empty)
                .Contains(nombreBuscado, StringComparison.OrdinalIgnoreCase))
            .ToList();
    }
}


<div class="position-relative">
    <img src="https://images.unsplash.com/photo-1521790797524-b2497295b8a0?auto=format&fit=crop&w=1500&q=80"
         class="img-fluid w-100" style="height: 300px; object-fit: cover;" alt="Banner agentes" />
    <div class="position-absolute top-50 start-0 translate-middle-y ps-5">
        <h1 class="text-white fw-bold display-5 text-shadow">Nuestros Agentes</h1>
        <p class="text-white fs-5 text-shadow">Profesionales dedicados a ayudarte a encontrar tu propiedad ideal</p>
    </div>
</div>


<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
          
        </div>
    </div>
</div>

<div class="container pb-5">
    @if (lista == null || !lista.Any())
    {
        <div class="alert alert-info text-center rounded-4 shadow-sm">
            No se encontraron agentes para la búsqueda.
        </div>
    }
    else
    {
  
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
            @foreach (var agente in lista.OrderBy(a => a.NombreCompleto))
            {
                var foto = !string.IsNullOrWhiteSpace(agente.FotoUrl)
                ? agente.FotoUrl
                : "https://via.placeholder.com/100x100?text=Agente";

                var detalleProp = Url.Action("Detalle", "Propiedad", new { codigo = agente.CodigoPropiedadDestacada });

                <div class="col">
                    <div class="card border-0 shadow-sm h-100 text-center hover-shadow rounded">
                        <div class="card-body d-flex flex-column align-items-center">
                            <img src="@foto"
                                 class="rounded-circle border shadow-sm mb-3"
                                 alt="@agente.NombreCompleto"
                                 style="width: 100px; height: 100px; object-fit: cover;"
                                 loading="lazy" />
                            <h6 class="card-title fw-bold text-capitalize">
                                @(string.IsNullOrWhiteSpace(agente.NombreCompleto) ? "Agente" : agente.NombreCompleto)
                            </h6>
                            <small class="text-muted">Agente inmobiliario</small>                      

                        
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>

<style>
    .hover-shadow:hover {
        transform: scale(1.03);
        transition: 0.3s ease-in-out;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
    }

    .text-shadow {
        text-shadow: 2px 2px 6px rgba(0,0,0,0.6);
    }
</style>
